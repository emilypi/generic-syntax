<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Generic.Semantics.TypeChecking</title><link rel="stylesheet" href="Agda.css"></head><body><pre><a id="1" class="Keyword">module</a> <a id="8" href="Generic.Semantics.TypeChecking.html" class="Module">Generic.Semantics.TypeChecking</a> <a id="39" class="Keyword">where</a>

<a id="46" class="Keyword">open</a> <a id="51" class="Keyword">import</a> <a id="58" href="Data.Unit.html" class="Module">Data.Unit</a>
<a id="68" class="Keyword">open</a> <a id="73" class="Keyword">import</a> <a id="80" href="Data.Bool.html" class="Module">Data.Bool</a>
<a id="90" class="Keyword">open</a> <a id="95" class="Keyword">import</a> <a id="102" href="Data.Product.html" class="Module">Data.Product</a> <a id="115" class="Symbol">as</a> <a id="118" class="Module">P</a> <a id="120" class="Keyword">hiding</a> <a id="127" class="Symbol">(</a><a id="128" href="Data.Product.html#1900" class="Function Operator">,_</a><a id="130" class="Symbol">)</a>
<a id="132" class="Keyword">open</a> <a id="137" class="Keyword">import</a> <a id="144" href="Data.List.html" class="Module">Data.List</a> <a id="154" class="Keyword">hiding</a> <a id="161" class="Symbol">(</a><a id="162" href="Data.List.Base.html#3423" class="Function Operator">[_]</a><a id="165" class="Symbol">)</a>
<a id="167" class="Keyword">open</a> <a id="172" class="Keyword">import</a> <a id="179" href="Data.Maybe.html" class="Module">Data.Maybe</a> <a id="190" class="Symbol">as</a> <a id="193" class="Module">Maybe</a> <a id="199" class="Keyword">hiding</a> <a id="206" class="Symbol">(</a><a id="207" href="Data.Maybe.Base.html#2348" class="Datatype">All</a><a id="210" class="Symbol">)</a>
<a id="212" class="Keyword">open</a> <a id="217" class="Keyword">import</a> <a id="224" href="Function.html" class="Module">Function</a>

<a id="234" class="Keyword">open</a> <a id="239" class="Keyword">import</a> <a id="246" href="indexed.html" class="Module">indexed</a>
<a id="254" class="Keyword">open</a> <a id="259" class="Keyword">import</a> <a id="266" href="var.html" class="Module">var</a> <a id="270" class="Keyword">hiding</a> <a id="277" class="Symbol">(</a><a id="278" href="var.html#895" class="Function Operator">_&lt;$&gt;_</a><a id="283" class="Symbol">)</a>
<a id="285" class="Keyword">open</a> <a id="290" class="Keyword">import</a> <a id="297" href="environment.html" class="Module">environment</a> <a id="309" class="Keyword">hiding</a> <a id="316" class="Symbol">(</a><a id="317" href="environment.html#556" class="Function Operator">_&lt;$&gt;_</a> <a id="323" class="Symbol">;</a> <a id="325" href="environment.html#1477" class="Function Operator">_&gt;&gt;_</a><a id="329" class="Symbol">)</a>
<a id="331" class="Keyword">open</a> <a id="336" class="Keyword">import</a> <a id="343" href="Generic.Syntax.html" class="Module">Generic.Syntax</a>
<a id="358" class="Keyword">open</a> <a id="363" class="Keyword">import</a> <a id="370" href="Generic.Semantics.html" class="Module">Generic.Semantics</a>

<a id="389" class="Keyword">open</a> <a id="394" class="Keyword">import</a> <a id="401" href="Generic.Syntax.Bidirectional.html" class="Module">Generic.Syntax.Bidirectional</a>

<a id="431" class="Keyword">import</a> <a id="438" href="Category.Monad.html" class="Module">Category.Monad</a> <a id="453" class="Symbol">as</a> <a id="456" class="Module">CM</a>
<a id="459" class="Keyword">import</a> <a id="466" href="Level.html" class="Module">Level</a>
<a id="472" class="Keyword">module</a> <a id="M"></a><a id="479" href="Generic.Semantics.TypeChecking.html#479" class="Module">M</a> <a id="481" class="Symbol">=</a> <a id="483" href="Category.Monad.html#652" class="Module">CM.RawMonad</a> <a id="495" class="Symbol">(</a><a id="496" href="Data.Maybe.html#1039" class="Function">Maybe.monad</a> <a id="508" class="Symbol">{</a><a id="509" href="Agda.Primitive.html#611" class="Primitive">Level.zero</a><a id="519" class="Symbol">})</a>
<a id="522" class="Keyword">open</a> <a id="527" href="Generic.Semantics.TypeChecking.html#479" class="Module">M</a>

<a id="530" class="Keyword">open</a> <a id="535" class="Keyword">import</a> <a id="542" href="Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a> <a id="580" class="Keyword">hiding</a> <a id="587" class="Symbol">(</a><a id="588" href="Relation.Binary.PropositionalEquality.html#3279" class="InductiveConstructor Operator">[_]</a><a id="591" class="Symbol">)</a>

<a id="594" class="Comment">-- Equality testing for types</a>

<a id="625" class="Keyword">infix</a> <a id="631" class="Number">3</a> <a id="633" href="Generic.Semantics.TypeChecking.html#638" class="Function Operator">_==_</a>
<a id="_==_"></a><a id="638" href="Generic.Semantics.TypeChecking.html#638" class="Function Operator">_==_</a> <a id="643" class="Symbol">:</a> <a id="645" class="Symbol">(</a><a id="646" href="Generic.Semantics.TypeChecking.html#646" class="Bound">σ</a> <a id="648" href="Generic.Semantics.TypeChecking.html#648" class="Bound">τ</a> <a id="650" class="Symbol">:</a> <a id="652" href="Generic.Syntax.Bidirectional.html#201" class="Datatype">Type</a><a id="656" class="Symbol">)</a> <a id="658" class="Symbol">→</a> <a id="660" href="Data.Maybe.Base.html#335" class="Datatype">Maybe</a> <a id="666" href="Agda.Builtin.Unit.html#69" class="Record">⊤</a>
<a id="668" href="Generic.Syntax.Bidirectional.html#220" class="InductiveConstructor">α</a>     <a id="674" href="Generic.Semantics.TypeChecking.html#638" class="Function Operator">==</a> <a id="677" href="Generic.Syntax.Bidirectional.html#220" class="InductiveConstructor">α</a>       <a id="685" class="Symbol">=</a> <a id="687" href="Data.Maybe.Base.html#373" class="InductiveConstructor">just</a> <a id="692" href="Agda.Builtin.Unit.html#106" class="InductiveConstructor">tt</a>
<a id="695" href="Generic.Semantics.TypeChecking.html#695" class="Bound">σ</a> <a id="697" href="Generic.Syntax.Bidirectional.html#234" class="InductiveConstructor Operator">⇒</a> <a id="699" href="Generic.Semantics.TypeChecking.html#699" class="Bound">τ</a> <a id="701" href="Generic.Semantics.TypeChecking.html#638" class="Function Operator">==</a> <a id="704" href="Generic.Semantics.TypeChecking.html#704" class="Bound">σ&#39;</a> <a id="707" href="Generic.Syntax.Bidirectional.html#234" class="InductiveConstructor Operator">⇒</a> <a id="709" href="Generic.Semantics.TypeChecking.html#709" class="Bound">τ&#39;</a> <a id="712" class="Symbol">=</a> <a id="714" class="Symbol">(</a><a id="715" href="Generic.Semantics.TypeChecking.html#695" class="Bound">σ</a> <a id="717" href="Generic.Semantics.TypeChecking.html#638" class="Function Operator">==</a> <a id="720" href="Generic.Semantics.TypeChecking.html#704" class="Bound">σ&#39;</a><a id="722" class="Symbol">)</a> <a id="724" href="Category.Monad.Indexed.html#630" class="Function Operator">&gt;&gt;</a> <a id="727" class="Symbol">(</a><a id="728" href="Generic.Semantics.TypeChecking.html#699" class="Bound">τ</a> <a id="730" href="Generic.Semantics.TypeChecking.html#638" class="Function Operator">==</a> <a id="733" href="Generic.Semantics.TypeChecking.html#709" class="Bound">τ&#39;</a><a id="735" class="Symbol">)</a>
<a id="737" class="CatchallClause Symbol">_</a><a id="738" class="CatchallClause">     </a><a id="743" href="Generic.Semantics.TypeChecking.html#638" class="CatchallClause Function Operator">==</a><a id="745" class="CatchallClause"> </a><a id="746" class="CatchallClause Symbol">_</a>       <a id="754" class="Symbol">=</a> <a id="756" href="Data.Maybe.Base.html#403" class="InductiveConstructor">nothing</a>

<a id="765" class="Comment">-- Trying to break down a putative arrow type into its constituents</a>
<a id="isArrow"></a><a id="833" href="Generic.Semantics.TypeChecking.html#833" class="Function">isArrow</a> <a id="841" class="Symbol">:</a> <a id="843" class="Symbol">(</a><a id="844" href="Generic.Semantics.TypeChecking.html#844" class="Bound">σ⇒τ</a> <a id="848" class="Symbol">:</a> <a id="850" href="Generic.Syntax.Bidirectional.html#201" class="Datatype">Type</a><a id="854" class="Symbol">)</a> <a id="856" class="Symbol">→</a> <a id="858" href="Data.Maybe.Base.html#335" class="Datatype">Maybe</a> <a id="864" class="Symbol">(</a><a id="865" href="Generic.Syntax.Bidirectional.html#201" class="Datatype">Type</a> <a id="870" href="Data.Product.html#1352" class="Function Operator">×</a> <a id="872" href="Generic.Syntax.Bidirectional.html#201" class="Datatype">Type</a><a id="876" class="Symbol">)</a>
<a id="878" href="Generic.Semantics.TypeChecking.html#833" class="Function">isArrow</a> <a id="886" class="Symbol">(</a><a id="887" href="Generic.Semantics.TypeChecking.html#887" class="Bound">σ</a> <a id="889" href="Generic.Syntax.Bidirectional.html#234" class="InductiveConstructor Operator">⇒</a> <a id="891" href="Generic.Semantics.TypeChecking.html#891" class="Bound">τ</a><a id="892" class="Symbol">)</a> <a id="894" class="Symbol">=</a> <a id="896" href="Data.Maybe.Base.html#373" class="InductiveConstructor">just</a> <a id="901" class="Symbol">(</a><a id="902" href="Generic.Semantics.TypeChecking.html#887" class="Bound">σ</a> <a id="904" href="Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="906" href="Generic.Semantics.TypeChecking.html#891" class="Bound">τ</a><a id="907" class="Symbol">)</a>
<a id="909" href="Generic.Semantics.TypeChecking.html#833" class="CatchallClause Function">isArrow</a><a id="916" class="CatchallClause"> </a><a id="917" class="CatchallClause Symbol">_</a>       <a id="925" class="Symbol">=</a> <a id="927" href="Data.Maybe.Base.html#403" class="InductiveConstructor">nothing</a>

<a id="936" class="Comment">----------------------------------------------------------------------</a>
<a id="1007" class="Comment">-- Type- Checking/Inference</a>

<a id="1036" class="Comment">-- The output of the semantics is the Type-(Check/Infer) process itself.</a>
<a id="1109" class="Comment">-- Hence the following definition</a>

<a id="Type-"></a><a id="1144" href="Generic.Semantics.TypeChecking.html#1144" class="Function">Type-</a> <a id="1150" class="Symbol">:</a> <a id="1152" href="Generic.Syntax.Bidirectional.html#442" class="Datatype">Mode</a> <a id="1157" class="Symbol">→</a> <a id="1159" class="PrimitiveType">Set</a>
<a id="1163" href="Generic.Semantics.TypeChecking.html#1144" class="Function">Type-</a> <a id="1169" href="Generic.Syntax.Bidirectional.html#461" class="InductiveConstructor">Check</a>  <a id="1176" class="Symbol">=</a> <a id="1178" href="Generic.Syntax.Bidirectional.html#201" class="Datatype">Type</a> <a id="1183" class="Symbol">→</a>  <a id="1186" href="Data.Maybe.Base.html#335" class="Datatype">Maybe</a> <a id="1192" href="Agda.Builtin.Unit.html#69" class="Record">⊤</a>
<a id="1194" href="Generic.Semantics.TypeChecking.html#1144" class="Function">Type-</a> <a id="1200" href="Generic.Syntax.Bidirectional.html#467" class="InductiveConstructor">Infer</a>  <a id="1207" class="Symbol">=</a>         <a id="1217" href="Data.Maybe.Base.html#335" class="Datatype">Maybe</a> <a id="1223" href="Generic.Syntax.Bidirectional.html#201" class="Datatype">Type</a>

<a id="Var-"></a><a id="1229" href="Generic.Semantics.TypeChecking.html#1229" class="Function">Var-</a> <a id="1234" class="Symbol">:</a> <a id="1236" href="Generic.Syntax.Bidirectional.html#442" class="Datatype">Mode</a> <a id="1241" class="Symbol">→</a> <a id="1243" class="PrimitiveType">Set</a>
<a id="1247" href="Generic.Semantics.TypeChecking.html#1229" class="Function">Var-</a> <a id="1252" class="Symbol">_</a> <a id="1254" class="Symbol">=</a> <a id="1256" href="Generic.Syntax.Bidirectional.html#201" class="Datatype">Type</a>

<a id="Typecheck"></a><a id="1262" href="Generic.Semantics.TypeChecking.html#1262" class="Function">Typecheck</a> <a id="1272" class="Symbol">:</a> <a id="1274" href="Generic.Semantics.html#487" class="Record">Sem</a> <a id="1278" href="Generic.Syntax.Bidirectional.html#832" class="Function">Lang</a> <a id="1283" class="Symbol">(</a><a id="1284" href="Function.html#1099" class="Function">const</a> <a id="1290" href="Function.html#759" class="Function Operator">∘</a> <a id="1292" href="Generic.Semantics.TypeChecking.html#1229" class="Function">Var-</a><a id="1296" class="Symbol">)</a> <a id="1298" class="Symbol">(</a><a id="1299" href="Function.html#1099" class="Function">const</a> <a id="1305" href="Function.html#759" class="Function Operator">∘</a> <a id="1307" href="Generic.Semantics.TypeChecking.html#1144" class="Function">Type-</a><a id="1312" class="Symbol">)</a>
<a id="1314" href="Generic.Semantics.TypeChecking.html#1262" class="Function">Typecheck</a> <a id="1324" class="Symbol">=</a> <a id="1326" class="Keyword">record</a> <a id="1333" class="Symbol">{</a> <a id="1335" class="Field">th^𝓥</a> <a id="1340" class="Symbol">=</a> <a id="1342" class="Symbol">λ</a> <a id="1344" href="Generic.Semantics.TypeChecking.html#1344" class="Bound">v</a> <a id="1346" href="Generic.Semantics.TypeChecking.html#1346" class="Bound">ρ</a> <a id="1348" class="Symbol">→</a> <a id="1350" href="Generic.Semantics.TypeChecking.html#1344" class="Bound">v</a><a id="1351" class="Symbol">;</a> <a id="1353" class="Field">var</a> <a id="1357" class="Symbol">=</a> <a id="1359" href="Generic.Semantics.TypeChecking.html#1388" class="Function">var</a> <a id="1363" class="Symbol">_;</a> <a id="1366" class="Field">alg</a> <a id="1370" class="Symbol">=</a> <a id="1372" href="Generic.Semantics.TypeChecking.html#1470" class="Function">alg</a> <a id="1376" class="Symbol">}</a> <a id="1378" class="Keyword">where</a>

   <a id="1388" href="Generic.Semantics.TypeChecking.html#1388" class="Function">var</a> <a id="1392" class="Symbol">:</a> <a id="1394" class="Symbol">(</a><a id="1395" href="Generic.Semantics.TypeChecking.html#1395" class="Bound">i</a> <a id="1397" class="Symbol">:</a> <a id="1399" href="Generic.Syntax.Bidirectional.html#442" class="Datatype">Mode</a><a id="1403" class="Symbol">)</a> <a id="1405" class="Symbol">→</a> <a id="1407" href="Generic.Semantics.TypeChecking.html#1229" class="Function">Var-</a> <a id="1412" href="Generic.Semantics.TypeChecking.html#1395" class="Bound">i</a> <a id="1414" class="Symbol">→</a> <a id="1416" href="Generic.Semantics.TypeChecking.html#1144" class="Function">Type-</a> <a id="1422" href="Generic.Semantics.TypeChecking.html#1395" class="Bound">i</a>
   <a id="1427" href="Generic.Semantics.TypeChecking.html#1388" class="Function">var</a> <a id="1431" href="Generic.Syntax.Bidirectional.html#467" class="InductiveConstructor">Infer</a>  <a id="1438" class="Symbol">=</a> <a id="1440" href="Data.Maybe.Base.html#373" class="InductiveConstructor">just</a>
   <a id="1448" href="Generic.Semantics.TypeChecking.html#1388" class="Function">var</a> <a id="1452" href="Generic.Syntax.Bidirectional.html#461" class="InductiveConstructor">Check</a>  <a id="1459" class="Symbol">=</a> <a id="1461" href="Generic.Semantics.TypeChecking.html#638" class="Function Operator">_==_</a>

   <a id="1470" href="Generic.Semantics.TypeChecking.html#1470" class="Function">alg</a> <a id="1474" class="Symbol">:</a> <a id="1476" class="Symbol">{</a><a id="1477" href="Generic.Semantics.TypeChecking.html#1477" class="Bound">i</a> <a id="1479" class="Symbol">:</a> <a id="1481" href="Generic.Syntax.Bidirectional.html#442" class="Datatype">Mode</a><a id="1485" class="Symbol">}</a> <a id="1487" class="Symbol">{</a><a id="1488" href="Generic.Semantics.TypeChecking.html#1488" class="Bound">Γ</a> <a id="1490" class="Symbol">:</a> <a id="1492" href="Agda.Builtin.List.html#80" class="Datatype">List</a> <a id="1497" href="Generic.Syntax.Bidirectional.html#442" class="Datatype">Mode</a><a id="1501" class="Symbol">}</a> <a id="1503" class="Symbol">→</a>
         <a id="1514" href="Generic.Syntax.html#736" class="Function Operator">⟦</a> <a id="1516" href="Generic.Syntax.Bidirectional.html#832" class="Function">Lang</a> <a id="1521" href="Generic.Syntax.html#736" class="Function Operator">⟧</a> <a id="1523" class="Symbol">(</a><a id="1524" href="environment.html#3741" class="Function">Kripke</a> <a id="1531" class="Symbol">(</a><a id="1532" href="indexed.html#854" class="Function">κ</a> <a id="1534" href="Function.html#759" class="Function Operator">∘</a> <a id="1536" href="Generic.Semantics.TypeChecking.html#1229" class="Function">Var-</a><a id="1540" class="Symbol">)</a> <a id="1542" class="Symbol">(</a><a id="1543" href="indexed.html#854" class="Function">κ</a> <a id="1545" href="Function.html#759" class="Function Operator">∘</a> <a id="1547" href="Generic.Semantics.TypeChecking.html#1144" class="Function">Type-</a><a id="1552" class="Symbol">))</a> <a id="1555" href="Generic.Semantics.TypeChecking.html#1477" class="Bound">i</a> <a id="1557" href="Generic.Semantics.TypeChecking.html#1488" class="Bound">Γ</a> <a id="1559" class="Symbol">→</a> <a id="1561" href="Generic.Semantics.TypeChecking.html#1144" class="Function">Type-</a> <a id="1567" href="Generic.Semantics.TypeChecking.html#1477" class="Bound">i</a>
   <a id="1572" class="Comment">-- Application:</a>
   <a id="1591" class="Comment">--  * Infer the type of the function</a>
   <a id="1631" class="Comment">--  * Make sure it is an arrow type</a>
   <a id="1670" class="Comment">--  * Check the argument belongs to the domain</a>
   <a id="1720" class="Comment">--  * Return the codomain</a>
   <a id="1749" href="Generic.Semantics.TypeChecking.html#1470" class="Function">alg</a> <a id="1753" class="Symbol">(</a><a id="1754" href="Generic.Syntax.Bidirectional.html#395" class="InductiveConstructor">App</a> <a id="1758" href="Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="1760" href="Generic.Semantics.TypeChecking.html#1760" class="Bound">f</a> <a id="1762" href="Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="1764" href="Generic.Semantics.TypeChecking.html#1764" class="Bound">t</a> <a id="1766" href="Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="1768" href="Agda.Builtin.Equality.html#140" class="InductiveConstructor">refl</a><a id="1772" class="Symbol">)</a>  <a id="1775" class="Symbol">=</a>  <a id="1778" href="Generic.Semantics.TypeChecking.html#1760" class="Bound">f</a>            <a id="1791" href="Category.Monad.Indexed.html#568" class="Function Operator">&gt;&gt;=</a> <a id="1795" class="Symbol">λ</a> <a id="1797" href="Generic.Semantics.TypeChecking.html#1797" class="Bound">σ⇒τ</a> <a id="1801" class="Symbol">→</a>
                                <a id="1835" href="Generic.Semantics.TypeChecking.html#833" class="Function">isArrow</a> <a id="1843" href="Generic.Semantics.TypeChecking.html#1797" class="Bound">σ⇒τ</a>  <a id="1848" href="Category.Monad.Indexed.html#568" class="Function Operator">&gt;&gt;=</a> <a id="1852" href="Data.Product.html#3461" class="Function">uncurry</a> <a id="1860" class="Symbol">λ</a> <a id="1862" href="Generic.Semantics.TypeChecking.html#1862" class="Bound">σ</a> <a id="1864" href="Generic.Semantics.TypeChecking.html#1864" class="Bound">τ</a> <a id="1866" class="Symbol">→</a>
                                <a id="1900" href="Generic.Semantics.TypeChecking.html#1864" class="Bound">τ</a> <a id="1902" href="Category.Functor.html#516" class="Function Operator">&lt;$</a> <a id="1905" href="Generic.Semantics.TypeChecking.html#1764" class="Bound">t</a> <a id="1907" href="Generic.Semantics.TypeChecking.html#1862" class="Bound">σ</a>
   <a id="1912" class="Comment">-- Lambda-Abstraction:</a>
   <a id="1938" class="Comment">--  * Make sure the candidate is an arrow type</a>
   <a id="1988" class="Comment">--  * Push a fresh variable of type the domain in the context</a>
   <a id="2053" class="Comment">--  * Check the body has type the codomain in the extended context</a>
   <a id="2123" href="Generic.Semantics.TypeChecking.html#1470" class="Function">alg</a> <a id="2127" class="Symbol">(</a><a id="2128" href="Generic.Syntax.Bidirectional.html#399" class="InductiveConstructor">Lam</a> <a id="2132" href="Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="2134" href="Generic.Semantics.TypeChecking.html#2134" class="Bound">b</a> <a id="2136" href="Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="2138" href="Agda.Builtin.Equality.html#140" class="InductiveConstructor">refl</a><a id="2142" class="Symbol">)</a>      <a id="2149" class="Symbol">=</a>  <a id="2152" class="Symbol">λ</a> <a id="2154" href="Generic.Semantics.TypeChecking.html#2154" class="Bound">σ⇒τ</a> <a id="2158" class="Symbol">→</a> <a id="2160" href="Generic.Semantics.TypeChecking.html#833" class="Function">isArrow</a> <a id="2168" href="Generic.Semantics.TypeChecking.html#2154" class="Bound">σ⇒τ</a> <a id="2172" href="Category.Monad.Indexed.html#568" class="Function Operator">&gt;&gt;=</a> <a id="2176" href="Data.Product.html#3461" class="Function">uncurry</a> <a id="2184" class="Symbol">λ</a> <a id="2186" href="Generic.Semantics.TypeChecking.html#2186" class="Bound">σ</a> <a id="2188" href="Generic.Semantics.TypeChecking.html#2188" class="Bound">τ</a> <a id="2190" class="Symbol">→</a>
                                <a id="2224" href="Generic.Semantics.TypeChecking.html#2134" class="Bound">b</a> <a id="2226" class="Symbol">(</a><a id="2227" href="environment.html#2306" class="Function">extend</a> <a id="2234" class="Symbol">{</a><a id="2235" class="Argument">σ</a> <a id="2237" class="Symbol">=</a> <a id="2239" href="Generic.Syntax.Bidirectional.html#467" class="InductiveConstructor">Infer</a><a id="2244" class="Symbol">})</a> <a id="2247" class="Symbol">(</a><a id="2248" href="environment.html#515" class="Function">ε</a> <a id="2250" href="environment.html#2070" class="Function Operator">∙</a> <a id="2252" href="Generic.Semantics.TypeChecking.html#2186" class="Bound">σ</a><a id="2253" class="Symbol">)</a> <a id="2255" href="Generic.Semantics.TypeChecking.html#2188" class="Bound">τ</a>
   <a id="2260" class="Comment">-- Cut aka Type Annotation:</a>
   <a id="2291" class="Comment">--  * Check the term as the ascribed type</a>
   <a id="2336" class="Comment">--  * Return that type</a>
   <a id="2362" href="Generic.Semantics.TypeChecking.html#1470" class="Function">alg</a> <a id="2366" class="Symbol">(</a><a id="2367" href="Generic.Syntax.Bidirectional.html#417" class="InductiveConstructor">Cut</a> <a id="2371" href="Generic.Semantics.TypeChecking.html#2371" class="Bound">σ</a> <a id="2373" href="Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="2375" href="Generic.Semantics.TypeChecking.html#2375" class="Bound">t</a> <a id="2377" href="Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="2379" href="Agda.Builtin.Equality.html#140" class="InductiveConstructor">refl</a><a id="2383" class="Symbol">)</a>    <a id="2388" class="Symbol">=</a>  <a id="2391" href="Generic.Semantics.TypeChecking.html#2371" class="Bound">σ</a> <a id="2393" href="Category.Functor.html#516" class="Function Operator">&lt;$</a> <a id="2396" href="Generic.Semantics.TypeChecking.html#2375" class="Bound">t</a> <a id="2398" href="Generic.Semantics.TypeChecking.html#2371" class="Bound">σ</a>
   <a id="2403" class="Comment">-- Embedding:</a>
   <a id="2420" class="Comment">--  * Infer the type of the term</a>
   <a id="2456" class="Comment">--  * Check it is equal to the candidate</a>
   <a id="2500" href="Generic.Semantics.TypeChecking.html#1470" class="Function">alg</a> <a id="2504" class="Symbol">(</a><a id="2505" href="Generic.Syntax.Bidirectional.html#403" class="InductiveConstructor">Emb</a> <a id="2509" href="Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="2511" href="Generic.Semantics.TypeChecking.html#2511" class="Bound">t</a> <a id="2513" href="Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="2515" href="Agda.Builtin.Equality.html#140" class="InductiveConstructor">refl</a><a id="2519" class="Symbol">)</a>      <a id="2526" class="Symbol">=</a>  <a id="2529" class="Symbol">λ</a> <a id="2531" href="Generic.Semantics.TypeChecking.html#2531" class="Bound">σ</a> <a id="2533" class="Symbol">→</a> <a id="2535" href="Generic.Semantics.TypeChecking.html#2511" class="Bound">t</a> <a id="2537" href="Category.Monad.Indexed.html#568" class="Function Operator">&gt;&gt;=</a> <a id="2541" class="Symbol">λ</a> <a id="2543" href="Generic.Semantics.TypeChecking.html#2543" class="Bound">τ</a> <a id="2545" class="Symbol">→</a> <a id="2547" href="Generic.Semantics.TypeChecking.html#2531" class="Bound">σ</a> <a id="2549" href="Generic.Semantics.TypeChecking.html#638" class="Function Operator">==</a> <a id="2552" href="Generic.Semantics.TypeChecking.html#2543" class="Bound">τ</a>

<a id="type-"></a><a id="2555" href="Generic.Semantics.TypeChecking.html#2555" class="Function">type-</a> <a id="2561" class="Symbol">:</a> <a id="2563" class="Symbol">(</a><a id="2564" href="Generic.Semantics.TypeChecking.html#2564" class="Bound">p</a> <a id="2566" class="Symbol">:</a> <a id="2568" href="Generic.Syntax.Bidirectional.html#442" class="Datatype">Mode</a><a id="2572" class="Symbol">)</a> <a id="2574" class="Symbol">→</a> <a id="2576" href="Generic.Syntax.html#1538" class="Function">TM</a> <a id="2579" href="Generic.Syntax.Bidirectional.html#832" class="Function">Lang</a> <a id="2584" href="Generic.Semantics.TypeChecking.html#2564" class="Bound">p</a> <a id="2586" class="Symbol">→</a> <a id="2588" href="Generic.Semantics.TypeChecking.html#1144" class="Function">Type-</a> <a id="2594" href="Generic.Semantics.TypeChecking.html#2564" class="Bound">p</a>
<a id="2596" href="Generic.Semantics.TypeChecking.html#2555" class="Function">type-</a> <a id="2602" href="Generic.Semantics.TypeChecking.html#2602" class="Bound">p</a> <a id="2604" href="Generic.Semantics.TypeChecking.html#2604" class="Bound">t</a> <a id="2606" class="Symbol">=</a> <a id="2608" href="Generic.Semantics.html#707" class="Function">Sem.sem</a> <a id="2616" href="Generic.Semantics.TypeChecking.html#1262" class="Function">Typecheck</a> <a id="2626" class="Symbol">{</a><a id="2627" class="Argument">Δ</a> <a id="2629" class="Symbol">=</a> <a id="2631" href="Agda.Builtin.List.html#117" class="InductiveConstructor">[]</a><a id="2633" class="Symbol">}</a> <a id="2635" href="environment.html#515" class="Function">ε</a> <a id="2637" href="Generic.Semantics.TypeChecking.html#2604" class="Bound">t</a>

<a id="2640" class="Comment">----------------------------------------------------------------------</a>
<a id="2711" class="Comment">-- Example</a>

<a id="2723" href="Generic.Semantics.TypeChecking.html#2723" class="Function">_</a> <a id="2725" class="Symbol">:</a> <a id="2727" class="Keyword">let</a> <a id="2731" class="Keyword">open</a> <a id="2736" href="Generic.Syntax.Bidirectional.html#1053" class="Module">PATTERNS</a>
        <a id="2753" href="Generic.Semantics.TypeChecking.html#2753" class="Bound">id</a>  <a id="2757" class="Symbol">:</a> <a id="2759" href="Generic.Syntax.html#1538" class="Function">TM</a> <a id="2762" href="Generic.Syntax.Bidirectional.html#832" class="Function">Lang</a> <a id="2767" href="Generic.Syntax.Bidirectional.html#461" class="InductiveConstructor">Check</a>
        <a id="2781" href="Generic.Semantics.TypeChecking.html#2753" class="Bound">id</a>  <a id="2785" class="Symbol">=</a> <a id="2787" href="Generic.Syntax.Bidirectional.html#1126" class="InductiveConstructor">LAM</a> <a id="2791" class="Symbol">(</a><a id="2792" href="Generic.Syntax.Bidirectional.html#1214" class="InductiveConstructor">EMB</a> <a id="2796" class="Symbol">(</a><a id="2797" href="Generic.Syntax.html#1125" class="InductiveConstructor">`var</a> <a id="2802" href="var.html#578" class="InductiveConstructor">z</a><a id="2803" class="Symbol">))</a>
    <a id="2810" class="Keyword">in</a> <a id="2813" href="Generic.Semantics.TypeChecking.html#2555" class="Function">type-</a> <a id="2819" href="Generic.Syntax.Bidirectional.html#467" class="InductiveConstructor">Infer</a> <a id="2825" class="Symbol">(</a><a id="2826" href="Generic.Syntax.Bidirectional.html#1079" class="InductiveConstructor">APP</a> <a id="2830" class="Symbol">(</a><a id="2831" href="Generic.Syntax.Bidirectional.html#1169" class="InductiveConstructor">CUT</a> <a id="2835" class="Symbol">((</a><a id="2837" href="Generic.Syntax.Bidirectional.html#220" class="InductiveConstructor">α</a> <a id="2839" href="Generic.Syntax.Bidirectional.html#234" class="InductiveConstructor Operator">⇒</a> <a id="2841" href="Generic.Syntax.Bidirectional.html#220" class="InductiveConstructor">α</a><a id="2842" class="Symbol">)</a> <a id="2844" href="Generic.Syntax.Bidirectional.html#234" class="InductiveConstructor Operator">⇒</a> <a id="2846" class="Symbol">(</a><a id="2847" href="Generic.Syntax.Bidirectional.html#220" class="InductiveConstructor">α</a> <a id="2849" href="Generic.Syntax.Bidirectional.html#234" class="InductiveConstructor Operator">⇒</a> <a id="2851" href="Generic.Syntax.Bidirectional.html#220" class="InductiveConstructor">α</a><a id="2852" class="Symbol">))</a> <a id="2855" href="Generic.Semantics.TypeChecking.html#2753" class="Bound">id</a><a id="2857" class="Symbol">)</a> <a id="2859" href="Generic.Semantics.TypeChecking.html#2753" class="Bound">id</a><a id="2861" class="Symbol">)</a>
     <a id="2868" href="Agda.Builtin.Equality.html#83" class="Datatype Operator">≡</a> <a id="2870" href="Data.Maybe.Base.html#373" class="InductiveConstructor">just</a> <a id="2875" class="Symbol">(</a><a id="2876" href="Generic.Syntax.Bidirectional.html#220" class="InductiveConstructor">α</a> <a id="2878" href="Generic.Syntax.Bidirectional.html#234" class="InductiveConstructor Operator">⇒</a> <a id="2880" href="Generic.Syntax.Bidirectional.html#220" class="InductiveConstructor">α</a><a id="2881" class="Symbol">)</a>
<a id="2883" class="Symbol">_</a> <a id="2885" class="Symbol">=</a> <a id="2887" href="Agda.Builtin.Equality.html#140" class="InductiveConstructor">refl</a>
</pre></body></html>